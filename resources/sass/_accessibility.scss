/**
 * Accessibility Styles for EEA Compliance
 * Ensures proper focus indicators, color contrast, and screen reader support
 */

// ============================================================================
// SCSS Variables
// ============================================================================

// Colors
$primary-color: #0d6efd;
$danger-color: #dc3545;
$muted-color: #6c757d;
$dark-color: #212529;
$light-gray: #dee2e6;
$lighter-gray: #e9ecef;
$lightest-gray: #f8f9fa;
$white: #ffffff;
$black: #000000;

// Focus & Accessibility
$focus-outline-width: 3px;
$focus-outline-offset: 2px;
$focus-shadow-opacity: 0.25;
$min-touch-target: 44px;
$min-touch-target-mobile: 48px;

// Typography
$small-font-size: 0.875rem;
$badge-font-size: 0.75rem;
$line-height-headings: 1.4;

// Spacing
$border-radius: 0.375rem;
$padding-sm: 0.25rem;
$padding-md: 0.5rem;
$padding-lg: 1rem;
$margin-sm: 0.25rem;
$margin-md: 0.5rem;
$margin-lg: 1rem;

// Z-index
$z-skip-links: 9999;

// ============================================================================
// SCSS Mixins
// ============================================================================

// Screen reader only content
@mixin visually-hidden {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
}

// Focus indicator
@mixin focus-indicator($color: $primary-color, $shadow-color: rgba($primary-color, $focus-shadow-opacity)) {
    outline: $focus-outline-width solid $color !important;
    outline-offset: $focus-outline-offset !important;
    box-shadow: 0 0 0 $focus-outline-width $shadow-color !important;
}

// Minimum touch target
@mixin min-touch-target($size: $min-touch-target) {
    min-height: $size;
    min-width: $size;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: $padding-md $padding-lg;
}

// ============================================================================
// Skip Navigation Links
// ============================================================================

.visually-hidden-focusable {
    @include visually-hidden;
    
    &:focus {
        position: absolute !important;
        width: auto !important;
        height: auto !important;
        padding: $padding-md $padding-lg !important;
        margin: 0 !important;
        overflow: visible !important;
        clip: auto !important;
        white-space: normal !important;
        z-index: $z-skip-links !important;
        text-decoration: none !important;
        border-radius: $border-radius !important;
        @include focus-indicator;
    }
}

// ============================================================================
// Screen Reader Only Content
// ============================================================================

.visually-hidden {
    @include visually-hidden;
}

// ============================================================================
// Focus Indicators
// ============================================================================

%focus-styles {
    @include focus-indicator;
}

a:focus,
button:focus,
input:focus,
textarea:focus,
select:focus,
[tabindex]:focus {
    @extend %focus-styles;
}

// High contrast focus for dark backgrounds
.navbar,
.btn-primary,
.bg-dark {
    a:focus,
    button:focus {
        @include focus-indicator($white, rgba($white, 0.5));
    }
}

// ============================================================================
// Form Accessibility
// ============================================================================

.text-danger {
    color: $danger-color !important;
    font-weight: bold;
}

.form-text {
    font-size: $small-font-size;
    color: $muted-color;
    margin-top: $margin-sm;
}

.invalid-feedback {
    display: block;
    width: 100%;
    margin-top: $margin-sm;
    font-size: $small-font-size;
    color: $danger-color;
}

// ============================================================================
// Post Components
// ============================================================================

.post-item {
    border-bottom: 1px solid $light-gray;
    padding-bottom: $padding-lg;
    margin-bottom: $padding-lg;
    
    &:last-child {
        border-bottom: none;
    }
}

.post-title {
    a {
        color: $dark-color;
        text-decoration: none;
        
        &:hover,
        &:focus {
            color: $primary-color;
            text-decoration: underline;
        }
    }
}

// ============================================================================
// Badge Components
// ============================================================================

.badge {
    font-size: $badge-font-size;
    padding: $padding-sm $padding-md;
    border-radius: $border-radius;
    
    a {
        color: inherit;
        text-decoration: none;
        
        &:hover,
        &:focus {
            text-decoration: underline;
        }
    }
}

// ============================================================================
// Interactive Elements
// ============================================================================

%min-touch-target {
    @include min-touch-target;
}

.btn,
.nav-link,
.dropdown-item,
input[type="submit"],
input[type="button"],
button {
    @extend %min-touch-target;
}

.search-component {
    .btn {
        @include min-touch-target;
        display: flex;
    }
}

// ============================================================================
// Dropdown Accessibility
// ============================================================================

.dropdown-menu {
    border: 1px solid $light-gray;
    box-shadow: 0 0.5rem 1rem rgba($black, 0.15);
}

.dropdown-item {
    &:focus {
        background-color: $lighter-gray;
        color: $dark-color;
    }
}

// ============================================================================
// Color & Contrast
// ============================================================================

.text-muted {
    color: $muted-color !important;
}

.card-header {
    background-color: $lightest-gray;
    border-bottom: 1px solid $light-gray;
    color: $dark-color;
}

// ============================================================================
// Loading States
// ============================================================================

.loading {
    opacity: 0.6;
    pointer-events: none;
}

// ============================================================================
// Media Queries
// ============================================================================

// Mobile responsiveness
@media (max-width: 768px) {
    .h1, .h2, .h3, .h4, .h5, .h6,
    h1, h2, h3, h4, h5, h6 {
        line-height: $line-height-headings;
    }
    
    .btn {
        @include min-touch-target($min-touch-target-mobile);
    }
}

// Print styles
@media print {
    .visually-hidden {
        position: static !important;
        width: auto !important;
        height: auto !important;
        padding: 0 !important;
        margin: 0 !important;
        overflow: visible !important;
        clip: auto !important;
        white-space: normal !important;
    }
    
    .skip-link {
        display: none !important;
    }
}

// Reduced motion preferences
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

// High contrast mode support
@media (prefers-contrast: high) {
    .card {
        border: 2px solid $black;
    }
    
    .btn {
        border: 2px solid $black;
    }
    
    a {
        text-decoration: underline;
    }
}
